From 27fd600fb24aacef589feddb06ef1725ca30319b Mon Sep 17 00:00:00 2001
From: Alexander Ivanovsky <sunx2ych@gmail.com>
Date: Sat, 27 Feb 2016 01:09:51 +0300
Subject: [PATCH] Return result of a deferred call

---
 src/hamcrest/core/core/raises.py             | 3 +--
 tests/hamcrest_unit_test/core/raises_test.py | 5 ++++-
 2 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/src/hamcrest/core/core/raises.py b/src/hamcrest/core/core/raises.py
index 191f1df..15f7c1b 100644
--- a/src/hamcrest/core/core/raises.py
+++ b/src/hamcrest/core/core/raises.py
@@ -2,7 +2,6 @@ from weakref import ref
 import re
 import sys
 from hamcrest.core.base_matcher import BaseMatcher
-from hamcrest.core.helpers.wrap_matcher import wrap_matcher
 from hamcrest.core.compat import is_callable
 
 __author__ = "Per Fagrell"
@@ -86,7 +85,7 @@ class DeferredCallable(object):
         self.kwargs = {}
 
     def __call__(self):
-        self.func(*self.args, **self.kwargs)
+        return self.func(*self.args, **self.kwargs)
 
     def with_args(self, *args, **kwargs):
         self.args = args
diff --git a/tests/hamcrest_unit_test/core/raises_test.py b/tests/hamcrest_unit_test/core/raises_test.py
index 02e8182..30f1b09 100644
--- a/tests/hamcrest_unit_test/core/raises_test.py
+++ b/tests/hamcrest_unit_test/core/raises_test.py
@@ -5,7 +5,6 @@ if __name__ == '__main__':
 
 from hamcrest.core.core.raises import *
 
-from hamcrest.core.core.isequal import equal_to
 from hamcrest_unit_test.matcher_test import MatcherTest
 import unittest
 
@@ -91,6 +90,10 @@ class CallingTest(unittest.TestCase):
         self.assertEqual(method.args, (3, 1, 4))
         self.assertEqual(method.kwargs, {"keyword1": "arg1"})
 
+    def testCallingReturnsFunctionResult(self):
+        returned = calling(sum).with_args((3, 1, 4))()
+        self.assertEqual(returned, 8)
+
 
 class Callable(object):
     def __init__(self):
-- 
2.9.3

